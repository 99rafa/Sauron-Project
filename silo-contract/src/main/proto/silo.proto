//
// Protocol buffers definition for Silo server
//
syntax = "proto3";
package pt.tecnico.sauron.silo.grpc;

import "google/type/latlng.proto";
import "google/protobuf/any.proto";


option java_multiple_files = true;

//cam_join silo operation

message CamJoinRequest {
    string camName = 1;
    google.type.LatLng coordinates = 2;

}

message CamJoinResponse {

}

//cam_info silo operation

message CamInfoRequest {
    string camName = 1;
}

message CamInfoResponse {
    google.type.LatLng coordinates = 2;
}

//report silo operation

message ReportRequest {
    string camName = 1;
    repeated  google.protobuf.Any observation = 2;

}

message ReportResponse {

}

//track silo operation

message TrackRequest {
   Type type = 1;
   string id = 2;
}

message TrackResponse {
    google.protobuf.Any observation = 1;

}

//trackMatch silo operation

message TrackMatchRequest {
    Type type = 1;
    string subId = 2;
}

message TrackMatchResponse {
    google.protobuf.Any observation = 1;
}

//trace silo operation

message TraceRequest {
    Type type = 1;
    string id = 2;
}

message TraceResponse {
    repeated google.protobuf.Any observation = 1;
}

enum Type {
    PERSON = 0;
    CAR = 1;
}



service SiloOperationsService {
    // Define a RPC operation
    rpc camJoin(CamJoinRequest) returns (CamJoinResponse);
    rpc camInfo(CamInfoRequest) returns (CamInfoResponse);
    rpc report(ReportRequest) returns (ReportResponse);
    rpc track(TrackRequest) returns (TrackResponse);
    rpc trackMatch(TrackMatchRequest) returns (TrackMatchResponse);
    rpc trace(TraceRequest) returns (TraceResponse);
}
